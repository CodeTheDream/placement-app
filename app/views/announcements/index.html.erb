<h3 class='page-header'>Announcements</h3>

<%= render 'new' %>

<div class='shadow-sm card col-8 rounded mb-2 mx-auto'>
  
  <h4 class='mt-4 mb-4 text-center'>All Announcements</h4>
  <% @announcements.reverse_each do |a| %>
    <div class='card-body'>
      <ul class='list-group shadow'>
        <li class='list-group-item'><%= a.text %></li>
        <li class='list-group-item'>
          Licensee: 
          <% if a.licensee_id != nil %>
            <%= a.licensee.facility_name %>
          <% else %>
            None
          <% end %>
           
           | Placement: 
          <% if a.placement_id != nil %>
            <%= a.placement.name %>
          <% else %>
            None
          <% end %>
          | Bed available? 
          <% if a.bed_available == true %>
            Yes
          <% else %>
            No
          <% end %>
        </li>
      </ul>
    </div>
    
  <div class='mt-2 text-white'>
    By <%= a.user.first_name %> <%= a.user.last_name %>
    at <%= a.created_at.strftime("%-I:%M %P on %-m/%-d/%y") %><br>
    <% if current_user && current_user.admin? %>
      <%= link_to 'Delete', announcement_path(a.id), method: :delete, :data => {:confirm => "Are you sure?"}, class: 'btn btn-danger mt-2' %>
    <% elsif current_user && current_user == a.user %>
      <%= link_to 'Edit', edit_announcement_path(a.id), class:'btn btn-standard' %>
      <%= link_to 'Delete', announcement_path(a.id), method: :delete, :data => {:confirm => "Are you sure?"}, class: 'btn btn-danger mt-2' %>
    <% end %>
  </div>
  <% end %>
</div>

