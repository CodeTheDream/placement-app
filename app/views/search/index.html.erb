<!--
<div class='card rounded mt-4 shadow-sm p-4 col-6'>
  <form action="/" method="get">
    <div class='row form-group'>
      
      <input type="text" name="query" id="query" placeholder=
      "Text search: Enter a county, city or name" class='form-control col-9 ml-3 shadow mt-1'>
      
      <input type="submit" value="Go", class='btn btn-search col-2 ml-3 mt-1'>
    </div>
  </form>
</div>


<div>
  OR
</div>

-->

<div class='card rounded mt-4 shadow-sm p-4 col-8'>
  <div class='card-body text-white font-weight-bold'>
    <p>Type a placement name, city, or county into the search bar and add 
    optional filters. Or, use the filters alone to browse placements by 
    county and/or license type.</p>
    <p>For a list of all placements, leave each field blank and click "Go."</p>
  
  <form action="/" method="get">
    
    <div class='row form-group'>
      
      <input type="text" name="query" id="query" placeholder=
      "Search" class='form-control col shadow my-1 mx-5'>
      
    </div>
    
    <div class='row form-group'>
      
      <select class='shadow form-control col ml-5 mr-1' name="filtercounty" id="filtercounty">
        <option value="">County</option>
        <option>Alamance</option> 
        <option>Johnston</option>
        <option>Wake</option>
        <option>Granville</option>
      </select>
      
      <select class='shadow form-control col mr-5 ml-1' name="filterservice" id="filterservice">
        <option value="">License Type</option>
        <%= @services.each do |s| %>
          <option value="<%= s.id %>"><%= s.name %></option>
        <% end %>
      </select>
    
    </div>
    
    <div class='row form-group'>
      <input type="submit" value="Go", class='btn btn-search col ml-5 mr-1'>
      <input type="reset" value="Reset Form" class='btn btn-standard col mr-5 ml-1'/>
    </div>
  </form>
  </div>
</div>


<% if (params[:filtercounty] || params[:filterservice] || params[:query]) && @placements != nil %> 

<h3 class='page-header'> <%= @placements.count %> Search Results</h3>

<div class='card col-8 rounded shadow text-white'>
  <h5 class='mt-3'>Click on a home or licensee to view details</h4>
  <div class='card-body rounded'>
    <div class='row'>
    <p class='col'>Query: 
    <% if params[:query] != nil %> 
      "<%= params[:query] %>"
    <% else %>
      None
    <% end %>
    </p>
    <p class='col'>County: 
    <% if params[:filtercounty] != nil %>
      <%= params[:filtercounty] %>
    <% else %>
      None
    <% end %>
    </p>
    <p class='col'>License: 
    <% if @services.find_by(id: params[:filterservice]) != nil %>
      <%= @services.find_by(id: params[:filterservice]).name %></p>
    <% else %>
      None
    <% end %>
    </p>
    </div>

    <%= link_to 'Add all search results to cart', add_all_to_carts_path(
    placement_ids: @placements.ids), method: :get, 
    class: 'btn btn-standard mb-4 font-weight-bold p-2' %>
    
    <% @placements.each do |p| %>
      <ul class='list-group'>
        <li class='list-group-item my-2 mx-2 shadow rounded'>
          <%= link_to p.name, placement_path(p.id), 
          class: 'border-bottom border-primary font-weight-bold' %>
          <br>
          <%= p.address %>, <%= p.city %>, <%= p.state %> <%= p.zip %>
          <br>
          <%= link_to 'Add to Cart', add_carts_path(placement_id: p.id), 
          method: :post, class: 'btn btn-standard mt-2' %>
        </li>
      </ul>
    <% end %>
 
  </div>
 

<% elsif params[:filter_county] || params[:filter_service] %>
<div>
  
</div>


<% end %>