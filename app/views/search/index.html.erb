<!--
<div class='card rounded mt-4 shadow-sm p-4 col-6'>
  <form action="/" method="get">
    <div class='row form-group'>
      
      <input type="text" name="query" id="query" placeholder=
      "Text search: Enter a county, city or name" class='form-control col-9 ml-3 shadow mt-1'>
      
      <input type="submit" value="Go", class='btn btn-search col-2 ml-3 mt-1'>
    </div>
  </form>
</div>


<div>
  OR
</div>

-->

<div class='card rounded mt-4 shadow-sm p-4 col-8'>
  <div class='card-body text-white font-weight-bold'>
    <p class='mx-2'>Type a general query into the search bar and add optional filters, or use 
    the filters alone to browse placements by county and/or license type.</p>
    <p>For a list of all placements, leave each field blank and click "Go."</p>
  
  <form action="/" method="get">
    
    <div class='row form-group'>
      
      <input type="text" name="query" id="query" placeholder=
      "Search" class='form-control col shadow my-1 mx-5'>
      
    </div>
    
    <div class='row form-group'>
        <select class='shadow custom-select col mr-1 ml-5' name="filtercounty" id="filtercounty">
          <option value="">County</option>
          <%= @counties.each do |c| %>
          <option value="<%= c.id %>"><%= c.name %></option> 
          <% end %>
        </select>
      
      <select class='shadow form-control col mr-5 ml-1' name="filterservice" id="filterservice">
        <option value="">License Type</option>
        <%= @services.each do |s| %>
          <option value="<%= s.id %>"><%= s.name %></option>
        <% end %>
      </select>
    
    </div>
    
    <div class='row form-group'>
      <input type="submit" value="Go", class='btn btn-search col ml-5 mr-1'>
      <input type="reset" value="Reset Form" class='btn btn-info col mr-5 ml-1'/>
    </div>
  </form>
  </div>
</div>

<% if (params[:filtercounty] || params[:filterservice] || params[:query]) && @placements != nil %> 

<h3 class='page-header'> <%= @placements.count %> Search Results</h3>

<div class='card col-8 rounded shadow text-white'>
  <h5 class='mt-3'>Click on a placement name to view details like referral contact and map</h4>
  <div class='card-body rounded'>
    <div class='row mx-2'>
    <p class='col'>Search: 
    <% if params[:query] != "" %> 
      "<%= params[:query] %>"
    <% else %>
      None
    <% end %>
    </p>
    <p class='col'>County: 
    <% if @counties.find_by(id: params[:filtercounty]) != nil %>
      <%= @counties.find_by(id: params[:filtercounty]).name %>
    <% else %>
      Any
    <% end %>
    </p>
    <p class='col'>License Type: 
    <% if @services.find_by(id: params[:filterservice]) != nil %>
      <%= @services.find_by(id: params[:filterservice]).name %></p>
    <% else %>
      Any
    <% end %>
    </p>
    </div>

    <%= link_to 'Add all results to cart', add_all_to_carts_path(
    placement_ids: @placements.ids), method: :get, 
    class: 'btn btn-standard mb-4 font-weight-bold p-2' %>
    
    <% @placements.each do |p| %>
      <ul class='list-group'>
        <li class='list-group-item my-2 mx-2 shadow rounded'>
          <div class='row'>
          <div class='col'>
          <%= link_to p.name, placement_path(p.id), 
          class: 'btn btn-info border-primary font-weight-bold' %>
          <br>
          <%= p.address %>, <%= p.city %>, <%= p.state %> <%= p.zip %>
          </div>
          <div class='col'>
          <%= link_to 'Add to Cart', add_carts_path(placement_id: p.id), 
          method: :post, class: 'btn btn-standard mt-2' %>
          </div>
          </div>
        </li>
      </ul>
    <% end %>
 
  </div>

<% end %>